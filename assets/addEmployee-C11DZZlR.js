import{r as n,j as e,L as y}from"./react-vendor-CHLR6qIU.js";import{d as b,a as j}from"./data-4NwGnHUR.js";import{a as N,f as v,e as w,c as S}from"./firebase-A1TrhjMY.js";import{d as C}from"./firebaseConfig-DYwBm8hJ.js";import"./vendor-BJwQ_dIz.js";const L=()=>{const[i,g]=n.useState(!1),[s,l]=n.useState({firstName:"",lastName:"",email:"",position:"",department:"",phone:"",employeeid:"",password:"",joinDate:"",role:""}),[d,c]=n.useState(!1),[u,m]=n.useState(""),r=o=>{const{name:a,value:p}=o.target;l(t=>({...t,[a]:p,...a==="department"?{position:""}:{}}))},x=b[s.department]||[],h=async o=>{o.preventDefault(),c(!0);try{const a=N(),t=(await v(a,s.email,s.password)).user,{password:D,...f}=s;await w(S(C,"employees"),{...f,uid:t.uid,createdAt:new Date().toISOString()}),m("Employee registered successfully"),setTimeout(()=>m(""),3e3),l({firstName:"",lastName:"",email:"",position:"",department:"",phone:"",employeeid:"",password:"",joinDate:"",role:""})}catch(a){console.error("Registration error:",a.message)}finally{c(!1)}};return e.jsx("div",{className:"container-fluid bg-gray-100 px-0",children:e.jsxs("div",{className:"bg-white p-3 rounded",children:[e.jsx(y,{to:"/admin/emplist",className:"mb-6 text-indigo-600 text-decoration-none",children:"â† Back to Employee List"}),e.jsx("h2",{className:"text-2xl font-bold mb-6 mt-6",children:"Add New Employee"}),u&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded",children:u}),e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{name:"firstName",value:s.firstName,onChange:r,placeholder:"First Name",className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0}),e.jsx("input",{name:"lastName",value:s.lastName,onChange:r,placeholder:"Last Name",className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0}),e.jsx("input",{name:"email",value:s.email,onChange:r,type:"email",placeholder:"Email",className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("select",{name:"department",value:s.department,onChange:r,className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),j.map(o=>e.jsx("option",{value:o.key,children:o.label},o.key))]}),e.jsxs("select",{name:"position",value:s.position,onChange:r,className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Position"}),x.map(o=>e.jsx("option",{value:o.key,children:o.label},o.key))]}),e.jsx("input",{type:"number",name:"phone",value:s.phone,onChange:r,placeholder:"Phone Number",className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{name:"employeeid",value:s.employeeid,onChange:r,placeholder:"Employee ID/Username",className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{name:"password",value:s.password,onChange:r,placeholder:"Password",type:i?"text":"password",className:"w-full border border-gray-300 px-4 py-2 pr-10 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0}),e.jsx("span",{className:"absolute inset-y-0 right-3 flex items-center cursor-pointer text-gray-500",onClick:()=>g(!i),children:e.jsx("i",{className:`bx ${i?"bx-hide":"bx-show"} text-xl`})})]}),e.jsxs("select",{name:"role",value:s.role,onChange:r,className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-gray-700",children:"Joining Date"}),e.jsx("input",{type:"date",name:"joinDate",value:s.joinDate,onChange:r,className:"border border-gray-300 px-4 py-2 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"})]})}),e.jsx("button",{type:"submit",disabled:d,className:"w-[250px] h-[45px] bg-blue-500 text-white py-2 mt-4 rounded-lg font-semibold hover:bg-indigo-700 transition duration-200",children:d?"Submitting...":"Add Employee"})]})]})})};export{L as default};
