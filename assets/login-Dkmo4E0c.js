import{r,u as h,j as e}from"./react-vendor-CHLR6qIU.js";import{q as w,c as v,w as j,g as y,a as N,s as I}from"./firebase-A1TrhjMY.js";import{d as k}from"./firebaseConfig-CKbRA7LN.js";import"./vendor-BJwQ_dIz.js";const E="/assets/sample2-B6r-iXvb.jpg";function F(){const[o,u]=r.useState(""),[n,x]=r.useState(""),[i,l]=r.useState(""),[d,L]=r.useState(!1),c=h(),g=async t=>{if(t.preventDefault(),l(""),!o||!n){l("Please enter both employee ID and password.");return}try{const s=w(v(k,"employees"),j("employeeid","==",o.trim())),m=await y(s);if(m.empty)throw new Error("Invalid Employee ID");const a=m.docs[0].data();if(!(a!=null&&a.email))throw new Error("Employee email is missing in Firestore.");const{email:f,role:p="user"}=a,b=N();await I(b,f,n),localStorage.setItem("role",p),localStorage.setItem("loggedIn","true"),c(p==="admin"?"/admin":"/user")}catch(s){console.error("Login failed:",s),l(`Login failed: ${s.message||"Unknown error occurred"}`)}};return e.jsxs("div",{className:"w-full h-screen flex p-0 m-0",children:[e.jsx("div",{className:"w-full md:w-1/2 lg:w-3/5 h-screen bg-cover bg-center",style:{backgroundImage:`url(${E})`}}),e.jsx("div",{className:"w-[40%] flex justify-center items-center",children:e.jsxs("form",{onSubmit:g,className:"flex flex-col items-center gap-3",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"Login"}),i&&e.jsx("p",{className:"text-red-600 text-sm font-medium",children:i}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("input",{type:"text",id:"username",value:o,onChange:t=>u(t.target.value),required:!0,className:"w-[300px] h-[50px] border border-black rounded-md text-lg px-4 bg-transparent text-black focus:outline-none focus:border-orange-500 peer"}),e.jsx("label",{htmlFor:"username",className:"absolute left-4 top-1/2 -translate-y-1/2 text-black text-[19px] transition-all peer-focus:top-0 peer-focus:text-orange-500 peer-focus:text-sm peer-valid:top-0 peer-valid:text-orange-500 peer-valid:text-sm bg-white px-1",children:"Username"})]}),e.jsxs("div",{className:"relative mb-1",children:[e.jsx("input",{type:"password",id:"password",value:n,onChange:t=>x(t.target.value),required:!0,className:"w-[300px] h-[50px] border border-black rounded-md text-lg px-4 bg-transparent text-black focus:outline-none focus:border-orange-500 peer"}),e.jsx("label",{htmlFor:"password",className:"absolute left-4 top-1/2 -translate-y-1/2 text-black text-[19px] transition-all peer-focus:top-0 peer-focus:text-orange-500 peer-focus:text-sm peer-valid:top-0 peer-valid:text-orange-500 peer-valid:text-sm bg-white px-1",children:"Password"})]}),e.jsx("a",{href:"#",className:"self-end text-orange-500 font-semibold text-sm",children:"Forgot Password"}),e.jsx("button",{type:"submit",disabled:d,className:"w-[300px] h-[50px] bg-orange-500 text-white font-semibold rounded-md transition-transform duration-300 hover:shadow-lg disabled:opacity-60",children:d?"Logging in...":"Login"})]})})]})}export{F as default};
