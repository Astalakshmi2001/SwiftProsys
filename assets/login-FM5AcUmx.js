import{r as s,u as v,j as e}from"./react-vendor-CHLR6qIU.js";import{q as j,c as y,w as N,g as k,a as I,s as S}from"./firebase-A1TrhjMY.js";import{d as E}from"./firebaseConfig-DYwBm8hJ.js";import"./vendor-BJwQ_dIz.js";const L="/assets/sample2-B6r-iXvb.jpg";function U(){const[o,x]=s.useState(""),[l,g]=s.useState(""),[d,n]=s.useState(""),[c,P]=s.useState(!1),[i,b]=s.useState(!1),m=v(),h=async t=>{if(t.preventDefault(),n(""),!o||!l){n("Please enter both employee ID and password.");return}try{const a=j(y(E,"employees"),N("employeeid","==",o.trim())),p=await k(a);if(p.empty)throw new Error("Invalid Employee ID");const r=p.docs[0].data();if(!(r!=null&&r.email))throw new Error("Employee email is missing in Firestore.");const{email:f,role:u="user"}=r,w=I();await S(w,f,l),localStorage.setItem("role",u),localStorage.setItem("loggedIn","true"),m(u==="admin"?"/admin":"/user")}catch(a){console.error("Login failed:",a),n(`Login failed: ${a.message||"Unknown error occurred"}`)}};return e.jsxs("div",{className:"w-full h-screen flex p-0 m-0",children:[e.jsx("div",{className:"w-full md:w-1/2 lg:w-3/5 h-screen bg-cover bg-center",style:{backgroundImage:`url(${L})`}}),e.jsx("div",{className:"w-[40%] flex justify-center items-center",children:e.jsxs("form",{onSubmit:h,className:"flex flex-col items-center gap-3",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"Login"}),d&&e.jsx("p",{className:"text-red-600 text-sm font-medium",children:d}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx("input",{type:"text",id:"username",value:o,onChange:t=>x(t.target.value),required:!0,className:"w-[300px] h-[50px] border border-black rounded-md text-lg px-4 bg-transparent text-black focus:outline-none focus:border-orange-500 peer"}),e.jsx("label",{htmlFor:"username",className:"absolute left-4 top-1/2 -translate-y-1/2 text-black text-[19px] transition-all peer-focus:top-0 peer-focus:text-orange-500 peer-focus:text-sm peer-valid:top-0 peer-valid:text-orange-500 peer-valid:text-sm bg-white px-1",children:"Username"})]}),e.jsxs("div",{className:"relative mb-3 w-[300px]",children:[e.jsx("input",{type:i?"text":"password",id:"password",value:l,onChange:t=>g(t.target.value),required:!0,className:"w-full h-[50px] border border-black rounded-md text-lg px-4 bg-transparent text-black focus:outline-none focus:border-orange-500 peer pr-10"}),e.jsx("label",{htmlFor:"password",className:"absolute left-4 top-1/2 -translate-y-1/2 text-black text-[19px] transition-all peer-focus:top-0 peer-focus:text-orange-500 peer-focus:text-sm peer-valid:top-0 peer-valid:text-orange-500 peer-valid:text-sm bg-white px-1",children:"Password"}),e.jsx("i",{className:`bx ${i?"bx-hide":"bx-show"} absolute right-3 top-1/2 -translate-y-1/2 text-2xl text-gray-700 cursor-pointer`,onClick:()=>b(!i)})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-[300px] h-[50px] bg-orange-500 text-white font-semibold rounded-md transition-transform duration-300 hover:shadow-lg disabled:opacity-60",children:c?"Logging in...":"Login"})]})})]})}export{U as default};
